<?xml version="1.0" encoding="UTF-8"?>
<fmiModelDescription
  fmiVersion="2.0"
  description="Force-velocity clutch with GSL integrator, taking torque as input"
  modelName="clutch"
  guid="{95857e9e-77b7-4d00-aef0-0836cffe26d0}"
  numberOfEventIndicators="0">

<CoSimulation
  modelIdentifier="clutch_ef"
  canHandleVariableCommunicationStepSize="true"
  canGetAndSetFMUstate="true"
  providesDirectionalDerivative="true"/>

<LogCategories>
  <Category name="logAll"/>
  <Category name="logError"/>
  <Category name="logFmiCall"/>
  <Category name="logEvent"/>
</LogCategories>

<DefaultExperiment startTime="0" stopTime="10" stepSize="0.1"/>

<ModelVariables>
    <ScalarVariable name="xi0"               valueReference="0"  description="initial position of in plate"                      causality="parameter" variability="fixed"><Real start="0"/></ScalarVariable>
    <ScalarVariable name="vi0"               valueReference="1"  description="initial velocity of in plate"                      causality="parameter" variability="fixed"><Real start="0"/></ScalarVariable>


    <ScalarVariable name="xo0"               valueReference="2"  description="initial position of out plate"                      causality="parameter" variability="fixed"><Real start="0"/></ScalarVariable>
    <ScalarVariable name="vo0"               valueReference="3"  description="initial velocity of out plate"                      causality="parameter" variability="fixed"><Real start="0"/></ScalarVariable>



    

    <!-- internal parameter -->
    <ScalarVariable name="mass1"             valueReference="3"  description="mass"                                  causality="parameter" variability="fixed"><Real start="1"/></ScalarVariable>
    <ScalarVariable name="gamma1"            valueReference="4"  description="damping constant for the body"         causality="parameter" variability="fixed"><Real start="1"/></ScalarVariable>
    <ScalarVariable name="clutch_damping"   valueReference="5"  description="internal clutch damping constant"      causality="parameter" variability="fixed"><Real start="1"/></ScalarVariable>


    <!-- inputs -->
    <ScalarVariable name="v_in"             valueReference="6"  description="external driving velocity"             causality="input" initial="exact"><Real start="0"/></ScalarVariable>
    <ScalarVariable name="force_in"         valueReference="7"  description="driving force"                         causality="input" initial="exact"><Real start="0"/></ScalarVariable>

    <!-- outputs -->
    <ScalarVariable name="v"                valueReference="8"  description="velocity"                              causality="output"><Real /></ScalarVariable>
    <ScalarVariable name="force_clutch"     valueReference="9"  description="value of coupling force at last step"  causality="output"><Real /></ScalarVariable>
</ModelVariables>

<ModelStructure>
  <Outputs>
    <Unknown index="9"/>
    <Unknown index="10"/>
  </Outputs>
  <Derivatives/>
  <DiscreteStates/>
  <InitialUnknowns />
</ModelStructure>

</fmiModelDescription>
