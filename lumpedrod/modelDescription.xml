<?xml version="1.0" encoding="UTF-8"?>
<fmiModelDescription
  fmiVersion="2.0"
  description="Lumped element rod which can be thought of as either a
               rotational or translational body"
  modelName="lumped_rod"
  guid="{b8998512-96a7-4e6d-8350-6d1f9aeae4a1}"
  numberOfEventIndicators="0">

<CoSimulation
  modelIdentifier="lumped_rod"
  canHandleVariableCommunicationStepSize="false"
  canGetAndSetFMUstate="true"
  providesDirectionalDerivative="true"/>

<LogCategories>
  <Category name="logAll"/>
  <Category name="logError"/>
  <Category name="logFmiCall"/>
  <Category name="logEvent"/>
</LogCategories>

<DefaultExperiment startTime="0" stopTime="10" stepSize="0.1"/>

<ModelVariables>
  <ScalarVariable name="theta1"      valueReference="0"  description="First angle"                             causality="output" initial="exact"><Real start="0"/></ScalarVariable>
  <ScalarVariable name="theta2"      valueReference="1"  description="Second angle"                             causality="output" initial="exact"><Real start="0"/></ScalarVariable>

  
  <ScalarVariable name="omega1"      valueReference="2"  description="First angular velocity"                  causality="output" initial="exact"><Real start="0"/></ScalarVariable>

  <ScalarVariable name="omega2"      valueReference="3"  description="Second angular velocity"                  causality="output" initial="exact"><Real start="0"/></ScalarVariable>
  
  <ScalarVariable name="alpha1"      valueReference="4"  description="First angular acceleration"              causality="output" initial="exact"><Real start="0"/></ScalarVariable>

  <ScalarVariable name="alpha2"      valueReference="5"  description="First angular acceleration"              causality="output" initial="exact"><Real start="0"/></ScalarVariable>
  
  <ScalarVariable name="tau1"        valueReference="6"  description="First torque"                            causality="input"><Real start="0"/></ScalarVariable>

  <ScalarVariable name="tau2"        valueReference="7"  description="Second torque"                            causality="input"><Real start="0"/></ScalarVariable>

  
  <ScalarVariable name="J0"       valueReference="8"  description="Moment of inertia"         causality="parameter" variability="fixed"><Real start="10"/></ScalarVariable>


  <ScalarVariable name="K"       valueReference="9"  description="Stiffness.  Use negative value for infinity"         causality="parameter" variability="fixed"><Real start="10"/></ScalarVariable>

  
  <ScalarVariable name="D"          valueReference="10"  description="Damping"                           causality="parameter" variability="fixed"><Real start="2"/></ScalarVariable>


  <ScalarVariable name="step"          valueReference="11"  description="Initial time step.  If this is set to 0, the communication time is used"                           causality="parameter" variability="fixed"><Real start="0.1"/></ScalarVariable>
  
  <ScalarVariable name="N"       valueReference="0"  description="Number of elements"         causality="parameter" variability="fixed"><Integer start="10"/></ScalarVariable>
</ModelVariables>



<ModelStructure>
  <Outputs>
    <Unknown index="1"/>
    <Unknown index="2"/>
    <Unknown index="3"/>
    <Unknown index="4"/>
    <Unknown index="5"/>
    <Unknown index="6"/>
  </Outputs>
  <Derivatives>
    <Unknown index="3"/>        <!-- unused -->
  </Derivatives>
  <DiscreteStates/>
  <InitialUnknowns />
</ModelStructure>

</fmiModelDescription>
