<!DOCTYPE html>
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html;charset=UTF-8" http-equiv="content-type" />
    <title>FMU Master</title>
    <link href="stylesheets/style.css" rel="stylesheet" type="text/css" />
    <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
  </head>
  <body>
    <div class="container">
        <div class="navbar">
            <div class="navbar-inner">
                <div class="container" style="width: auto;">
                    <a class="brand" href="#">FMU Master</a>
                    <ul class="nav" role="navigation">
                        <li class="divider-vertical"></li>
                        <li class="dropdown">
                            <a id="drop1" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">Import FMU <b class="caret"></b></a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="drop1" id="fmu-dropdown">
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#" data-fmu="wheelloader">wheelloader</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#" data-fmu="agxVehicle">agxVehicle</a></li>
                            </ul>
                        </li>
                        <li class="divider-vertical"></li>
                        <li class="dropdown">
                            <a href="#" id="drop2" role="button" class="dropdown-toggle" data-toggle="dropdown">Options <b class="caret"></b></a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="drop2">
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Dummy option</a></li>
                            </ul>
                        </li>
                        <li class="divider-vertical"></li>
                        <li><a href="#">Simulate...</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="row">
            <div id="diagram" class="span8">
              <h3>Block diagram</h3>
              <p>This should be a block diagram but keep in mind that this is a prototype.</p>
                <table id="fmu-table" class="table table-hover">
                    <thead>
                        <th>FMU identifyer</th>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
            <div id="selection-menu" class="span4">
                <h3 class="head">Selection menu</h3>
                <p id="variables-loading-message" style="display:none">Loading variables...</p>
                <table id="init-vals" style="display:none" class="table table-hover">
                    <thead>
                        <th>Initial states</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>state_name</td>
                            <td><input type="number"></td>
                        </tr>
                    </tbody>
                </table>
                <table id="parameters" style="display:none" class="table table-hover">
                    <thead>
                        <th>Parameters</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>param_name</td>
                            <td><input type="number"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <footer class="footer">
          <div class="container">
            <p>UMIT Research Lab 2013</p>
          </div>
        </footer>
    </div>

    <script src="javascripts/lib/raphael.js"></script>
    <script src="javascripts/lib/jquery.js"></script>
    <script src="javascripts/lib/jquery.flot.js"></script>
    <script src="bootstrap/js/bootstrap.js"></script>

    <script>
        // Add FMU
        $("#fmu-dropdown li a").click(function(){

            var id = $(this).attr("data-fmu");

            // Add to the diagram
            var $fmu = $("<tr><td><a class=\"fmu\" href=\"#\">"+id+"</a></td></tr>");
            $("#fmu-table").append($fmu);

            // Select the FMU
            $fmu.click(function(){
                $("#selection-menu .head").html(id);
                $("#variables-loading-message").show();
                $("#parameters").hide();
                $("#init-vals").hide();
                setTimeout(function(){
                    $("#variables-loading-message").hide();
                    $("#parameters").show();
                    $("#init-vals").show();
                },500);
            });
        });
    </script>
</body>
</html>
